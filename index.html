<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Welcome</title>
    <link rel="stylesheet" href="./public/styles.css" />
    <meta property="og:image" content="./public/og.png" />
    <link rel="shortcut icon" href="./public/favicon.png">
  </head>
  <body>
    <div id="centered">
      <div id="pumpkinContainer">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="102.124"
          height="93"
          viewBox="0 0 102.124 93"
        >
          <g id="pumpkin" transform="translate(-174.713 -118.788)">
            <path
              id="outline"
              d="M2205.776,260.76s-13.431-1.917-22.114,3.877-14.532,14.717-15.5,24.489,1.448,29.493,12.271,33.833c2.444.98,5.938,3.617,9.886,4.945a36.813,36.813,0,0,0,9.534,1.681s6.855,4.051,9.464,4.381c6.153.778,8.392-2.42,8.392-2.42a10.1,10.1,0,0,0,8.873,3.55c5.885-.538,9.258-5.511,9.258-5.511a18.813,18.813,0,0,0,8.417,0,8.015,8.015,0,0,0,5.834-4.477,5.2,5.2,0,0,0,4.733,0c2.229-1.339,11.137-5.589,13.567-17.269s2.863-20.352-2.833-29.776-10.622-16.126-17.521-17.3-12.1,1.211-16.719,1.211a17.935,17.935,0,0,1-7.155-1.211s.929-6.48,2.419-8.569,5.985-5.709,7.949-7.982-8.436-2.753-11.6-1.015-7.92.953-7.92.953.051,7.174-2.547,12.471S2205.776,260.76,2205.776,260.76Z"
              transform="translate(-1993.257 -123.357)"
              fill="rgba(255,255,255,0.24)"
            />
            <path
              id="left-eye"
              d="M2182.814,248.642c4.293.7,12,8.356,12,8.356s2.246,3.85,0,5.986-4.686,2.734-8.914,2.734-7.264-1.537-8.259-3.792-.1-5.467,0-7.724S2178.521,247.943,2182.814,248.642Z"
              transform="translate(-1978.348 -100.858)"
              fill="#1c1b3e"
            />
            <path
              id="right-eye"
              d="M2190.17,248.642c-4.293.7-12,8.356-12,8.356s-2.246,3.85,0,5.986,4.687,2.734,8.914,2.734,7.264-1.537,8.259-3.792.1-5.467,0-7.724S2194.463,247.943,2190.17,248.642Z"
              transform="translate(-1945.579 -100.858)"
              fill="#1c1b3e"
            />
            <path
              id="nose"
              d="M2194.978,254.971s-2.975,4.684-4.46,7.515a3.685,3.685,0,0,0,2.458,5.364c1.5.093,2-3.183,2-3.183s1.5,3.294,3.2,3.183,3.022-2.647,1.426-5.364S2194.978,254.971,2194.978,254.971Z"
              transform="translate(-1970.123 -91.773)"
              fill="#1c1b3e"
            />
            <path
              id="mouth"
              d="M2173.422,264.359s-.437,9.145.723,12.335a23.737,23.737,0,0,0,3.875,6.293l2.007-.814s3.487,5.29,4.928,5.075a69.125,69.125,0,0,0,6.82-2.228s2.37,5.155,3.5,5.026a40.389,40.389,0,0,0,5.55-2.15s3.547,5.468,5.34,5.273,5.732-4.606,5.732-4.606,5.056,1.768,6.737,1.482,3.885-5.026,3.885-5.026,7.7,1.512,9.169,1.138,4.759-7.4,5.178-11.126-.439-12.3-.439-12.3l-4.74,8.261-2.809,3.078-2.265-2.207-2.52,2.633-1.576,3.482-2.5-3.908-3.506,5.885-6.652-4.921L2205,281.075l-4.176-6.044-5.55,4.921-3.5-5.112-3.374,4.247-1.709-7.227-1.853,2.207-2.378-1.149-.995-1.929-2.144.45Z"
              transform="translate(-1979.387 -93.643)"
              fill="#1c1b3e"
            />
          </g>
        </svg>
      </div>
      <p id="cto" class="center themed-text blinktext">click to open</p>
    </div>
    <article id="invite">
      <section id="cta">
        <div>
          <img src="./public/jackolantern.png" width="102px" height="93px" />
          <h1 id="name" class="themed-text center" style="font-size: 20px">
          </h1>
          <p
            class="themed-text center"
            style="line-height: 1.3rem; font-size: 12px"
          >
            You've been invited to an exclusive event
          </p>
        </div>
        <div id="scroll-indicator">
          <p class="themed-text" style="font-size: 10px">scroll to open</p>
          <svg
            xmlns="http://www.w3.org/2000/svg"
            width="19.378"
            height="15.83"
            viewBox="0 0 19.378 15.83"
          >
            <g
              id="scroll_chevrons"
              data-name="scroll chevrons"
              transform="translate(-8.518 10.982)"
            >
              <path
                id="bottom"
                d="M10.5,19.5l7.707,3.451L25.914,19.5"
                transform="translate(0 -19.602)"
                fill="none"
                stroke="rgba(255,255,255,0.7)"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="3"
              />
              <path
                id="top"
                d="M10.5,9l7.707,3.451L25.914,9"
                transform="translate(0 -18)"
                fill="none"
                stroke="rgba(255,255,255,0.7)"
                stroke-linecap="round"
                stroke-linejoin="round"
                stroke-width="3"
              />
            </g>
          </svg>
        </div>
        <img src="./public/background.png" id="background" />
      </section>
      <section id="main" style="position: relative">
        <div style="position: relative; top: 380px">
          <h1
            class="themed-text center"
            style="font-size: 30px; max-width: 1000px"
          >
            Oct 27, 07:00
          </h1>
          <p class="themed-text center">Music, Drinks, Games</p>
        </div>
        <div
          style="
            position: relative;
            top: 680px;
            display: flex;
            justify-content: space-around;
          "
        >
          <h1
            class="center themed-text"
            style="position: absolute; top: -50px; opacity: 0.8"
          >
            RSVP
          </h1>
          <input
            class="tgl tgl-skewed"
            id="cb3"
            type="checkbox"
            style="display: none"
          />
          <label class="tgl-btn themed-text" for="cb3"></label>
          <input type="checkbox" id="cb4" style="display: none;" />
          <label class="bigbutton themed-text" type="button" for="cb4"></label>
        </div>
        <div style="position: absolute;top: 980px;width: 100%;color: rgba(255, 255, 255, 0.8);">
            <h1 style="text-align: center; max-width: 100%;" class="themed-text">Info:</h1>
            <ul style="max-width: 300px;margin: auto;     ">
                <li>Venue: Matt's Nightclub</li>
                <li>Time: 7pm</li>
                <li>Addy: RSVP to reveal </li>
                <li>Policies: BYOB, No Smoking/substances</li>
                <li>Dress Code: Wear a costume! (but something you can dance in ;)</li>
                <li>Expect Karaoke, games, and spooky vibes</li>
            </ul>
            <br>
            <br>
            <p style="max-width: 100%; text-align: center;">You may bring a "plus one," invite them with this link:</p>
            <p style="max-width: 100%; text-align: center;" id="guestlink"></p>
        </div>

        <!-- background shapes -->
        <svg
          style="position: absolute; top: 190px; left: 20px"
          xmlns="http://www.w3.org/2000/svg"
          width="165.327"
          height="165.327"
          viewBox="0 0 165.327 165.327"
        >
          <path
            id="Icon_awesome-hat-wizard"
            data-name="Icon awesome-hat-wizard"
            d="M122.145,110.324H3.94A3.939,3.939,0,0,0,0,114.265v7.88a3.939,3.939,0,0,0,3.94,3.94h118.2a3.939,3.939,0,0,0,3.94-3.94v-7.88A3.939,3.939,0,0,0,122.145,110.324ZM47.282,94.564l-15.761-7.88L47.282,78.8l7.88-15.761L63.043,78.8,78.8,86.683l-15.761,7.88-3.94,7.88h51.222L89.045,52.791A15.75,15.75,0,0,1,88.58,41.6L102.444,0,56.251,26.4A31.519,31.519,0,0,0,43.086,40.963L15.761,102.444H51.222ZM63.043,39.4l3.94-7.88,3.94,7.88,7.88,3.94-7.88,3.94-3.94,7.88-3.94-7.88-7.88-3.94Z"
            transform="matrix(0.921, -0.391, 0.391, 0.921, 0, 49.265)"
            fill="rgba(255,255,255,0.09)"
          />
        </svg>
        <svg
          style="position: absolute; top: -20px; right: -180px"
          xmlns="http://www.w3.org/2000/svg"
          width="344.055"
          height="345.09"
          viewBox="0 0 344.055 345.09"
        >
          <path
            id="Icon_awesome-spider"
            data-name="Icon awesome-spider"
            d="M78.912,116.713l11.447,4.234h2.062l2.3-12.784a52.868,52.868,0,0,1,1.417-5.771L87.185,82.53,97.692,47.589c1.232-4.1-.764-8.536-4.468-9.906l-6.7-2.477c-3.7-1.37-7.7.847-8.935,4.953l-11.43,38.02a17.24,17.24,0,0,0,.764,11.957l11.986,26.577ZM253.1,183.808l-23.288-38.725a13.817,13.817,0,0,0-11.752-6.975H183.651l30.457-11.923a14.417,14.417,0,0,0,7.289-6.172l23.663-39.356A8.372,8.372,0,0,0,243.1,69.8l-5.876-4.346a6.653,6.653,0,0,0-9.8,2.173l-22.321,37.115L178.4,114.61H162.461l-4.578-25.378c-.967-5.369-7.668-29.44-30.74-29.44S97.37,83.863,96.4,89.232L91.825,114.61H75.888l-26.7-9.872L26.859,67.623a6.653,6.653,0,0,0-9.8-2.173L11.187,69.8a8.371,8.371,0,0,0-1.96,10.861l23.663,39.356a14.417,14.417,0,0,0,7.289,6.172L70.635,138.1H36.227a13.822,13.822,0,0,0-11.755,6.972L1.187,183.808a8.367,8.367,0,0,0,1.96,10.861l5.876,4.346a6.654,6.654,0,0,0,9.8-2.173L40.01,161.6H60.786L33.931,209.239a16.936,16.936,0,0,0-2.146,8.3v38.03c0,4.327,3.161,7.831,7.064,7.831h7.064c3.9,0,7.064-3.5,7.064-7.831V219.787l32.7-58.014c-.446,6.877-.918,13.758-.918,20.659,0,25.975,17.994,49.644,42.381,49.644s42.381-23.67,42.381-49.644c0-6.9-.477-13.783-.918-20.659l32.7,58.014V255.57c0,4.327,3.161,7.831,7.064,7.831h7.064c3.9,0,7.063-3.5,7.063-7.831V217.536a16.97,16.97,0,0,0-2.146-8.3L193.5,161.6h20.776l21.19,35.24a6.654,6.654,0,0,0,9.8,2.173l5.876-4.346A8.36,8.36,0,0,0,253.1,183.808ZM167.432,77.821l-8.957,19.862a52.857,52.857,0,0,1,1.417,5.771l2.3,12.784h2.062L175.705,112l11.986-26.577a17.215,17.215,0,0,0,.764-11.957l-11.43-38.02c-1.232-4.1-5.236-6.324-8.935-4.953l-6.7,2.477c-3.7,1.37-5.7,5.8-4.468,9.906Z"
            transform="translate(366.062 179.639) rotate(133)"
            fill="rgba(255,255,255,0.1)"
          />
        </svg>
        <svg
          style="position: absolute; top: 580px; left: 30px"
          xmlns="http://www.w3.org/2000/svg"
          width="148.18"
          height="146.528"
          viewBox="0 0 148.18 146.528"
        >
          <path
            id="Icon_awesome-spider"
            data-name="Icon awesome-spider"
            d="M34.064,67.288l4.942,1.818h.89l.995-5.49a22.6,22.6,0,0,1,.612-2.478l-3.867-8.529,4.536-15a3.452,3.452,0,0,0-1.929-4.254l-2.891-1.063a2.993,2.993,0,0,0-3.857,2.127L28.56,50.741a7.367,7.367,0,0,0,.33,5.135l5.174,11.412ZM109.256,96.1,99.2,79.47a5.97,5.97,0,0,0-5.073-3H79.277l13.148-5.12a6.215,6.215,0,0,0,3.146-2.65l10.215-16.9a3.582,3.582,0,0,0-.846-4.664L102.4,45.275a2.88,2.88,0,0,0-4.229.933L88.539,62.146,77.01,66.385H70.13l-1.976-10.9c-.417-2.306-3.31-12.642-13.269-12.642S42.032,53.182,41.615,55.487l-1.976,10.9h-6.88L21.231,62.146,11.594,46.208a2.88,2.88,0,0,0-4.229-.933L4.829,47.141a3.582,3.582,0,0,0-.846,4.664L14.2,68.705a6.215,6.215,0,0,0,3.146,2.65l13.147,5.118H15.638a5.972,5.972,0,0,0-5.074,2.994L.513,96.1a3.58,3.58,0,0,0,.846,4.664L3.9,102.629a2.881,2.881,0,0,0,4.229-.933l9.147-15.133H26.24L14.647,107.02a7.243,7.243,0,0,0-.926,3.565v16.331a3.217,3.217,0,0,0,3.049,3.363h3.049a3.217,3.217,0,0,0,3.049-3.363V111.549L36.986,86.637c-.192,2.953-.4,5.908-.4,8.871,0,11.154,7.768,21.318,18.295,21.318s18.295-10.164,18.295-21.318c0-2.963-.206-5.919-.4-8.871L86.9,111.549v15.366a3.217,3.217,0,0,0,3.049,3.363H93a3.217,3.217,0,0,0,3.049-3.363V110.582a7.257,7.257,0,0,0-.926-3.565L83.529,86.562H92.5l9.147,15.133a2.881,2.881,0,0,0,4.229.933l2.536-1.866A3.577,3.577,0,0,0,109.256,96.1ZM72.276,50.587l-3.867,8.529a22.6,22.6,0,0,1,.612,2.478l.995,5.49h.89l4.942-1.818,5.174-11.413a7.357,7.357,0,0,0,.33-5.135L76.417,32.392a3,3,0,0,0-3.857-2.127l-2.891,1.063a3.453,3.453,0,0,0-1.929,4.254Z"
            transform="matrix(-0.788, -0.616, 0.616, -0.788, 67.973, 170.241)"
            fill="rgba(255,255,255,0.08)"
          />
        </svg>
        <svg
          style="position: absolute; top: 515px; right: -10px"
          xmlns="http://www.w3.org/2000/svg"
          width="124.077"
          height="98.871"
          viewBox="0 0 124.077 98.871"
        >
          <path
            id="Icon_awesome-broom"
            data-name="Icon awesome-broom"
            d="M49.722,41.86,66.536,62.944S63.318,82.71,51.692,91.933,0,98.522,0,98.522s.737-4.469,2.133-10.7L20.477,66.157a1.159,1.159,0,0,0-1.289-1.835L7.478,68.588c2.8-8.045,6.343-15.456,10.585-18.822,11.626-9.223,31.659-7.906,31.659-7.906ZM123.4,5.992l-3.85-4.828A3.1,3.1,0,0,0,115.21.67L70.139,35l-6.619-8.3a2.137,2.137,0,0,0-3.6.427L55,37.668,71.819,58.751l11.4-2.4a2.121,2.121,0,0,0,1.229-3.4L77.839,44.66,122.91,10.326a3.078,3.078,0,0,0,.494-4.333Z"
            fill="rgba(255,255,255,0.08)"
          />
        </svg>
      </section>
    </article>

    <script>
      const params = new URLSearchParams(window.location.search);
      document.addEventListener("click", openinvite);
      document.getElementById('guestlink').innerText = `https://malloween.vercel.app/?n=${encodeURIComponent(params.get('n')+"'s guest")}`;
      document.getElementById('name').innerText = params.get('n');
      function openinvite() {
        window.scrollTo(0, 0);
        document.getElementById("centered").classList.add("out");
        document.getElementById("invite").classList.add("in");
        document.removeEventListener("click", openinvite);

        function reqListener() {
        console.log(this.responseText);
        }


        const req = new XMLHttpRequest();
        req.addEventListener("load", reqListener);
        req.open("GET", `${window.location.origin}/api/rsvp?n=${params.get('n')}`);
        req.send();
      }
      document.getElementById("cb3").addEventListener("change", ()=>document.getElementById('cb3').checked && updateRSVP("true"));
      document.getElementById("cb4").addEventListener("change", ()=>document.getElementById('cb4').checked && updateRSVP("false"));
      function updateRSVP(rsvp) {
        function reqListener() {
          console.log(this.responseText);
        }
        document.getElementById('cb4').checked = (rsvp === "false" ? true : false)
        document.getElementById('cb3').checked = (rsvp === "true" ? true : false)

        const req = new XMLHttpRequest();
        req.addEventListener("load", reqListener);
        req.open("GET", `${window.location.origin}/api/rsvp?n=${params.get('n')}&rsvp=${rsvp}`);
        req.send();
      }
    </script>
  </body>
</html>
